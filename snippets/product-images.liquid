{% liquid
  assign c = "ProductImages"
  assign settings = settings
  assign product = product
  assign current_variant = current_variant
  assign is_gift_card = is_gift_card | default: false
  assign image_count = 0
  assign featured_image = product.featured_image

  if current_variant.featured_image
    assign featured_image = current_variant.featured_image
  endif
  for tag in product.tags
    if tag contains 'Rose Type'
      assign rose_type = tag | remove: 'Rose Type:'
    endif
  endfor
%}

<div class="{{c}}"
  data-component="{{c}}"
>
  <div class="{{c}}__cover js-imageCover"></div>

  <div class="{{c}}__images-wrap">
    <div class="{{c}}__container swiper js-imageSlider">
      <div class="{{c}}__wrapper swiper-wrapper">
        {% if featured_image %}
          {% assign image_count = image_count | plus: 1 %}

          <div class="{{c}}__slide {{c}}__slide--variant-image-slide swiper-slide">
            <img class="{{c}}__image {{c}}__image--variant-image swiper-lazy js-featuredImage"
              data-src="{{ featured_image | image_url: width: 1024 }}" 
              alt="{{ featured_image.alt | escape }}"
              width="{{ featured_image.width }}"
              height="{{ featured_image.height }}"
              loading="lazy"
            >

            {%
              render 'image-zoom-button',
              image: featured_image,
              variant_image: true,
            %}
          </div>
        {% endif %}

        {% for image in product.images %}
          {% if image.alt contains 'image-with-thumbnail' %}
            {% assign image_count = image_count | plus: 1 %}

            <div class="{{c}}__slide swiper-slide">
              <img class="{{c}}__image swiper-lazy"
                data-src="{{ image | image_url: width: 1024 }}" 
                alt="{{ image.alt | remove_first: 'image-with-thumbnail' }}"
                width="{{ image.width }}"
                height="{{ image.height }}"
                loading="lazy"
              >

              {%
                render 'image-zoom-button',
                image: image,
              %}
            </div>
          {% endif %}
        {% endfor %}
      </div>
    </div>
  </div>

  {% if image_count > 1 %}
    <div class="{{c}}__slider-navigation">
      <button class="{{c}}__arrow {{c}}__arrow--prev js-prevImageBtn"
        aria-label="Previous image"
      >
        {%
          render 'component-icon',
          icon: 'pagination-arrow'
        %}
      </button>

      <div class="{{c}}__pagination js-imageSliderPagination"></div>
  
      <button class="{{c}}__arrow {{c}}__arrow--next js-nextImageBtn"
        aria-label="Next image"
      >
        {%
          render 'component-icon',
          icon: 'pagination-arrow'
        %}
      </button>
    </div>
  {% endif %}

  {% if settings.wishlist_tooltip_show %}
    {%
      render 'wishlist-tooltip',
      settings: settings,
    %}
  {% endif %}
</div>
