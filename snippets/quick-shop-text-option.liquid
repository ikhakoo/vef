{% liquid
  assign option = option
  assign value = value
  assign available_variants = available_variants
  assign show_only_available = show_only_available | default: false
  assign show_only_unavailable = show_only_unavailable | default: false

  assign is_available = true
  assign option_value = '|' | append: value | append: '|'
  unless available_variants contains option_value
    assign is_available = false
  endunless

  assign display_option = true
  if show_only_available
    unless is_available
      assign display_option = false
    endunless
  elsif show_only_unavailable
    if is_available
      assign display_option = false
    endif
  endif

  assign is_selected = false
  if option.selected_value == value
    assign is_selected = true
  endif
%}

{% if display_option %}
  {%
    render 'quick-shop-product-option',
    option: option,
    value: value,
    label: value,
    is_available: is_available,
    is_selected: is_selected,
  %}
{% endif %}
